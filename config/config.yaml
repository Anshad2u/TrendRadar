# TrendRadar Configuration File
# Customized for Anshad2u

# ===============================================================
# 1. BASIC SETTINGS
# ===============================================================
app:
  # Timezone configuration (affects all time displays, push windowÂà§Êñ≠, data storage)
  # Common timezones:
  #   - Asia/Shanghai (Beijing Time UTC+8)
  #   - America/New_York (US Eastern UTC-5/-4)
  #   - Europe/London (London Time UTC+0/+1)
  # Full timezone list: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
  timezone: "UTC"                     # Changed to UTC for international use
  show_version_update: true           # Show version update prompts


# ===============================================================
# 2. DATA SOURCES - TRENDING PLATFORMS
#
# id: Platform unique identifier (DO NOT MODIFY)
# name: Display name (can be customized, doesn't affect operation)
# ===============================================================
platforms:
  - id: "hacker-news"
    name: "Hacker News"
  - id: "reddit-tech"
    name: "Reddit r/technology"
  - id: "product-hunt"
    name: "Product Hunt"
  - id: "github-trending"
    name: "GitHub Trending"
  - id: "techcrunch"
    name: "TechCrunch"
  - id: "wired"
    name: "Wired"
  - id: "the-verge"
    name: "The Verge"
  - id: "ars-technica"
    name: "Ars Technica"
  - id: "engadget"
    name: "Engadget"
  - id: "mashable"
    name: "Mashable"
  - id: "venturebeat"
    name: "VentureBeat"
  - id: "techrepublic"
    name: "TechRepublic"


# ===============================================================
# 3. DATA SOURCES - RSS FEEDS
#
# Separate from trending data, displayed in time flow
# Each source config: id(unique), name(display), url(feed address)
# enabled: optional, default true
# max_age_days: optional, overrides global freshness_filter.max_age_days
# ===============================================================
rss:
  enabled: true                       # Enable RSS scraping

  # Article freshness filter (global default)
  # Filters out articles older than specified days to avoid duplicates
  #
  # Filter logic:
  #   - Articles published more than N days ago (in app.timezone) are not pushed
  #   - Articles without publish time are kept (not filtered)
  #
  # ‚ö†Ô∏è Filter timing: During push phase
  #    - All articles are stored in database (MCP Server AI queries can still access)
  #    - Only fresh articles are pushed to notification channels
  freshness_filter:
    enabled: true                     # Enable freshness filter (default enabled)
    max_age_days: 3                   # Max article age (days)
                                      # - Positive integer: Only push articles within N days
                                      # - 0: Disable filter, push all articles

  # Individual feed can configure max_age_days to override global setting:
  # - Not configured: Use global freshness_filter.max_age_days (default 3 days)
  # - Positive integer: Override global setting, only push within this many days
  # - 0: Disable freshness filter for this channel, push all articles
  feeds:
    - id: "hacker-news"
      name: "Hacker News"
      url: "https://hnrss.org/frontpage"
      # max_age_days: 1               # Example: Only push 1-day-old articles

    - id: "techcrunch"
      name: "TechCrunch"
      url: "https://techcrunch.com/feed/"
      # max_age_days: 7               # Example: Push 7-day-old articles (slower updates)

    - id: "wired"
      name: "Wired"
      url: "https://www.wired.com/feed/rss"
      enabled: false                  # Disabled

    # Custom feed example
    # - id: "custom-feed"
    #   name: "Custom Feed"
    #   url: "https://example.com/feed.xml"
    #   enabled: false
    #   max_age_days: 0               # Example: Disable filter, push all articles


# ===============================================================
# 4. REPORT MODE
#
# üî∏ daily (Daily Summary Mode)
#    ‚Ä¢ Push timing: Scheduled push (default every hour)
#    ‚Ä¢ Display content: All matching news of the day + new news area
#    ‚Ä¢ Use case: Daily summary, comprehensive understanding of daily trends
#
# üî∏ current (Current List Mode)
#    ‚Ä¢ Push timing: Scheduled push (default every hour)
#    ‚Ä¢ Display content: Current list matching news + new news area
#    ‚Ä¢ Use case: Real-time trend tracking, understanding currently hottest content
#
# üî∏ incremental (Incremental Monitoring Mode)
#    ‚Ä¢ Push timing: Only push when new content appears
#    ‚Ä¢ Display content: Newly appeared matching frequency word news
#    ‚Ä¢ Use case: Avoid duplicate information interference
# ===============================================================
report:
  mode: "current"                     # Options: daily | current | incremental
  display_mode: "keyword"             # Options: keyword | platform
                                      # keyword: Display grouped by keyword (default)
                                      # platform: Display grouped by platform/source
  rank_threshold: 5                   # Ranking highlight threshold
  sort_by_position_first: false       # true=Sort by config position, false=Sort by hot count
  max_news_per_keyword: 0             # Max news per keyword (0=unlimited)
  reverse_content_order: false        # false=Hot word stats first, true=New hot news first


# ===============================================================
# 5. PUSH NOTIFICATIONS
#
# ‚ö†Ô∏è IMPORTANT SECURITY WARNING ‚ö†Ô∏è
#
# üî¥ Please keep webhooks secure, do not expose publicly!!!
# üî¥ If deploying on GitHub via fork, DO NOT fill here
# üî¥ Instead, add webhooks to GitHub Secrets
#    (Settings ‚Üí Secrets and variables ‚Üí Actions)
# üî¥ Otherwise:
#    - Light: ReceiveÂ§ßÈáèÂûÉÂúæÂπøÂëäÊé®ÈÄÅ on your phone
#    - Heavy: Webhook abused causing serious security risks
#
# üìå Multi-account Support
#
# ‚Ä¢ Use semicolon (;) to separate multiple accounts, e.g.: "url1;url2;url3"
# ‚Ä¢ Paired configs (e.g., Telegram token and chat_id) must have matching counts
# ‚Ä¢ Each channel supports max_accounts_per_channel accounts
# ‚Ä¢ Email already supports multiple recipients (comma-separated)
# ===============================================================
notification:
  enabled: true                       # Enable notification function

  # üïê Push Time Window Control (Optional)
  # Purpose: Limit push time range, avoid non-work hours disturbance
  # Use cases:
  #   - Only receive pushes during workday daytime (e.g., 09:00-18:00)
  #   - Want summary at fixed evening time (e.g., 20:00-22:00)
  # Note: GitHub Actions execution time is unstable, time range should be at least 2 hours
  #       For precise scheduled pushes, consider Docker deployment on personal server
  push_window:
    enabled: false                    # Enable push time window control
    start: "09:00"                    # Start time (UTC)
    end: "17:00"                      # End time (UTC)
    once_per_day: true                # true=Push once per window, false=Push every execution

  # üìã Standalone Display Configuration (Optional)
  # Purpose: Display specified platform/RSS separately,‰∏çÂèóÂÖ≥ÈîÆËØçËøáÊª§ÂΩ±Âìç
  # Use cases:
  #   - Want to see complete ranking of a platform
  #   - RSS sources have few items,Â∏åÊúõÂÖ®ÈÉ®Â±ïÁ§∫ËÄåÈùûÂè™ÊòæÁ§∫ÂÖ≥ÈîÆËØçÂåπÈÖçÁöÑ
  # Note: Same news may appear in both keyword matching area and standalone display area
  standalone_display:
    enabled: false                    # Enable standalone display
    platforms: []                     # Trending platform ID list (e.g., ["zhihu", "weibo"])
    rss_feeds: []                     # RSS source ID list (e.g., ["hacker-news"])
    max_items: 20                     # Max items per source (0=unlimited)

  # Push Channel Configuration
  channels:
    feishu:
      webhook_url: ""                 # Feishu bot webhook URL

    dingtalk:
      webhook_url: ""                 # DingTalk bot webhook URL

    wework:
      webhook_url: ""                 # WeChat Work bot webhook URL
      msg_type: "markdown"            # Message type: markdown(Group bot) | text(WeChat app)

    telegram:
      bot_token: ""                   # Telegram Bot Token (will be set via GitHub Secrets)
      chat_id: ""                     # Telegram Chat ID (will be set via GitHub Secrets)

    email:
      from: ""                        # Sender email address
      password: ""                    # Sender email password or authorization code
      to: ""                          # Recipient email, multiple separated by commas
      smtp_server: ""                 # SMTP server (optional, auto-detect if empty)
      smtp_port: ""                   # SMTP port (optional, auto-detect if empty)

    ntfy:
      server_url: "https://ntfy.sh"   # ntfy server address (can be self-hosted)
      topic: ""                       # ntfy topic name
      token: ""                       # ntfy access token (optional, for private topics)

    bark:
      url: ""                         # Bark push URL (format: https://api.day.app/your_device_key)

    slack:
      webhook_url: ""                 # Slack Incoming Webhook URL

    generic_webhook:
      webhook_url: ""                 # Generic Webhook URL (supports Discord, Matrix, IFTTT, etc.)
      payload_template: ""            # JSON template, supports {title} and {content} placeholders
                                      # Example: {"content": "{content}"}
                                      # Leave empty to use default format: {"title": "{title}", "content": "{content}"}


# =======================================rage backend selection
  # - auto: Auto-select (GitHub Actions + remote storage configured ‚Üí remote, otherwise ‚Üí local)
  # - local: Local SQLite + TXT/HTML files
  # - remote: Remote cloud storage (S3 compatible protocol, supports R2/OSS/COS, etc.)
  backend: "auto"

  # Data format options
  formats:
    sqlite: true                      # Main storage (must be enabled)
    txt: false                        # Generate TXT snapshot
    html: true                        # Generate HTML report (‚ö†Ô∏è Email push must be set to true)

  # Local storage configuration
  local:
    data_dir: "output"                # Data directory
    retention_days: 0                 # Retention days (0=permanent)

  # Remote storage configuration (S3 compatible protocol)
  # Supports: Cloudflare R2, Aliyun OSS, Tencent COS, AWS S3, MinIO, etc.
  #Âª∫ËÆÆÂ∞ÜÊïèÊÑü‰ø°ÊÅØÈÖçÁΩÆÂú® GitHub Secrets ÊàñÁéØÂ¢ÉÂèòÈáè‰∏≠
  remote:
    retention_days: 0                 # Retention days (0=permanent)
    # S3 compatible config (or use environment variables S3_ENDPOINT_URL, etc.)
    # endpoint_url: ""                # S3 endpoint URL
    # access_key_id: ""               # Access key ID
    # secret_access_key: ""           # Secret access key
    # bucket_name: ""                 # Bucket name
    # region: ""                      # Region


# ===============================================================
# 7. CRAWLER CONFIGURATION
# ===============================================================
crawler:
  enabled: true                       # Enable crawler (will be set via GitHub Secrets)
  timeout: 30                         # Request timeout (seconds)
  retry_times: 3                      # Retry times on failure
  user_agent: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"


# ===============================================================
# 8. AI ANALYSIS CONFIGURATION
# ===============================================================
ai_analysis:
  enabled: true                       # Enable AI analysis
  provider: "openrouter"              # AI provider (will be set via GitHub Secrets)
  api_key: ""                         # API key (will be set via GitHub Secrets)
  model: "anthropic/claude-3-5-sonnet" # Model to use
  temperature: 0.7                    # Creativity level (0.0-2.0)
  max_tokens: 2000                    # Max response tokens
  push_mode: "both"                   # Options: original | analysis | both
                                      # original: Only push original news
                                      # analysis: Only push AI analysis
                                      # both: Push both original and analysis


# ===============================================================
# 9. ACTIVITY CHECK-IN (GitHub Actions Only)
# ===============================================================
checkin:
  enabled: true                       # Enable activity check-in
  interval_days: 7                    # Check-in interval (days)
  auto_checkin: false                 # Auto check-in (requires GitHub token)
  reminder_enabled: true              # Enable reminder notifications


# ===============================================================
# 10. ADVANCED SETTINGS
# ===============================================================
advanced:
  # Performance settings
  max_concurrent_requests: 10         # Max concurrent requests
  request_delay: 0.5                  # Delay between requests (seconds)
  
  # Logging
  log_level: "INFO"                   # Options: DEBUG | INFO | WARNING | ERROR
  log_to_file: false                  # Write logs to file
  
  # Debug mode
  debug_mode: false                   # Enable debug mode (verbose logging)
  dry_run: false                      # Dry run (don't actually push notifications)

